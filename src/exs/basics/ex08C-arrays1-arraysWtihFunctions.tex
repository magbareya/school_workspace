\documentclass[14pt]{extarticle}
\input{../../../scripts/tex_preamble.tex}

\ifwithsols
\title{حل ورقة تمرن 8 - مصفوفات مع عمليات \\ قسم 3 - عمليات خارجية تتلقى وتعيد مصفوفة}
\else
\title{ورقة تمرن 8 - مصفوفات مع عمليات \\ قسم 3 - عمليات خارجية تتلقى وتعيد مصفوفة}
\fi

\begin{document}

\maketitle
\thispagestyle{fancy}

\begin{enumerate}[itemsep=2em]

    % ======================================================
    % الخوارزميات (Algorithms Snippets)
    % ======================================================

    \item
    اكتب مقطع برنامج لإيجاد \textbf{ثاني أكبر قيمة} في مصفوفة أعداد صحيحة.
    (افترض أن المصفوفة تحتوي على الأقل على عنصرين مختلفين).
    \ifwithsols
    \begin{boxSolution}
    \begin{english}
    \begin{minted}{csharp}
int max = int.MinValue;
int secondMax = int.MinValue;

foreach (int num in arr)
{
    if (num > max)
    {
        secondMax = max;
        max = num;
    }
    else if (num > secondMax && num != max)
    {
        secondMax = num;
    }
}
Console.WriteLine("Second Max: " + secondMax);
    \end{minted}
    \end{english}
    \end{boxSolution}
    \fi

    % ======================================================
    % كتابة الدوال (Writing Functions)
    % ======================================================

    \item
    اكتب عملية خارجية \textenglish{int FindIndex(int[] arr, int val)} تعيد رقم الخانة (Index) لأول ظهور للقيمة \textenglish{val} في المصفوفة. إذا لم تجدها تعيد -1.
    \ifwithsols
    \begin{boxSolution}
    \begin{english}
    \begin{minted}{csharp}
public static int FindIndex(int[] arr, int val)
{
    for (int i = 0; i < arr.Length; i++)
    {
        if (arr[i] == val)
            return i;
    }
    return -1;
}
    \end{minted}
    \end{english}
    \end{boxSolution}
    \fi

    \item
    اكتب عملية خارجية \textenglish{void ReplaceNegativeWithZero(int[] arr)} تستقبل مصفوفة أعداد صحيحة وتعدلها بحيث تستبدل كل عدد سالب فيها بالصفر.
    \ifwithsols
    \begin{boxSolution}
    \begin{english}
    \begin{minted}{csharp}
public static void ReplaceNegativeWithZero(int[] arr)
{
    for (int i = 0; i < arr.Length; i++)
    {
        if (arr[i] < 0)
        {
            arr[i] = 0;
        }
    }
}
    \end{minted}
    \end{english}
    \end{boxSolution}
    \fi

    \item
    اكتب عملية خارجية \textenglish{bool HasIncreasingSequence(int[] arr)} تعيد \textenglish{true} إذا وجدت في المصفوفة 3 أرقام متتالية (بجانب بعضها) مرتبة تصاعدياً بصرامة ($a < b < c$).
    \ifwithsols
    \begin{boxSolution}
    \begin{english}
    \begin{minted}{csharp}
public static bool HasIncreasingSequence(int[] arr)
{
    if (arr.Length < 3) return false;
    for (int i = 0; i < arr.Length - 2; i++)
    {
        if (arr[i] < arr[i + 1] && arr[i + 1] < arr[i + 2])
        {
            return true;
        }
    }
    return false;
}
    \end{minted}
    \end{english}
    \end{boxSolution}
    \fi

    \item
    اكتب عملية خارجية \textenglish{double CenteredAverage(int[] arr)} تحسب معدل الأعداد في المصفوفة بعد استثناء أكبر قيمة وأصغر قيمة لمرة واحدة.
    (افترض أن طول المصفوفة 3 على الأقل).
    \ifwithsols
    \begin{boxSolution}
    \begin{english}
    \begin{minted}{csharp}
public static double CenteredAverage(int[] arr)
{
    int max = arr[0];
    int min = arr[0];
    int sum = 0;

    for (int i = 0; i < arr.Length; i++)
    {
        sum += arr[i];
        if (arr[i] > max) max = arr[i];
        if (arr[i] < min) min = arr[i];
    }
    // نستثني الماكس والمين من المجموع
    sum = sum - max - min;
    // نقسم على العدد ناقص عنصرين
    return (double)sum / (arr.Length - 2);
}
    \end{minted}
    \end{english}
    \end{boxSolution}
    \fi

    \item
    اكتب عملية خارجية \textenglish{bool IsSorted(int[] arr)} تعيد \textenglish{true} فقط إذا كانت عناصر المصفوفة مرتبة تصاعدياً بالكامل (من الأصغر للأكبر).
    \ifwithsols
    \begin{boxSolution}
    \begin{english}
    \begin{minted}{csharp}
public static bool IsSorted(int[] arr)
{
    for (int i = 0; i < arr.Length - 1; i++)
    {
        if (arr[i] > arr[i + 1])
            return false; // وجدنا عنصرا أكبر من الذي يليه
    }
    return true;
}
    \end{minted}
    \end{english}
    \end{boxSolution}
    \fi

    \item
    اكتب عملية خارجية \textenglish{bool IsPalindrome(int[] arr)} تفحص هل مصفوفة الأعداد الصحيحة متناظرة (تقرأ من اليمين كاليسار).
    مثال: $\{1, 2, 3, 2, 1\}$ متناظرة.
    \ifwithsols
    \begin{boxSolution}
    \begin{english}
    \begin{minted}{csharp}
public static bool IsPalindrome(int[] arr)
{
    for (int i = 0; i < arr.Length / 2; i++)
    {
        if (arr[i] != arr[arr.Length - 1 - i])
        {
            return false;
        }
    }
    return true;
}
    \end{minted}
    \end{english}
    \end{boxSolution}
    \fi

    \item
    اكتب عملية خارجية \textenglish{int CountSignChanges(int[] arr)} تعد عدد المرات التي تتغير فيها إشارة الرقم (من موجب لسالب أو العكس) بين كل عنصر والعنصر الذي يليه. (تجاهل الصفر).
    \ifwithsols
    \begin{boxSolution}
    \begin{english}
    \begin{minted}{csharp}
public static int CountSignChanges(int[] arr)
{
    int changes = 0;
    for (int i = 0; i < arr.Length - 1; i++)
    {
        if (arr[i] == 0 || arr[i + 1] == 0) continue;

        // فحص اختلاف الإشارة
        bool currentPos = arr[i] > 0;
        bool nextPos = arr[i + 1] > 0;

        if (currentPos != nextPos)
        {
            changes++;
        }
    }
    return changes;
}
    \end{minted}
    \end{english}
    \end{boxSolution}
    \fi

    \item
    اكتب عملية خارجية \textenglish{int LongestSequence(int[] arr)} تعيد طول أطول تسلسل متصل من عناصر لها نفس القيمة.\\
    \textbf{مثال:} \textenglish{\{1, 2, 2, 2, 3\}} الناتج 3.
    \ifwithsols
    \begin{boxSolution}
    \begin{english}
    \begin{minted}{csharp}
public static int LongestSequence(int[] arr)
{
    if (arr.Length == 0) return 0;
    int maxLen = 1;
    int currentLen = 1;

    for (int i = 1; i < arr.Length; i++)
    {
        if (arr[i] == arr[i - 1])
        {
            currentLen++;
            if (currentLen > maxLen) maxLen = currentLen;
        }
        else
        {
            currentLen = 1;
        }
    }
    return maxLen;
}
    \end{minted}
    \end{english}
    \end{boxSolution}
    \fi

    \item
    اكتب عملية خارجية \textenglish{void ShiftRight(int[] arr, int n)} تقوم بإزاحة عناصر المصفوفة \textenglish{n} خطوات لليمين بشكل دائري (Circular Shift).
    \ifwithsols
    \begin{boxSolution}
    \begin{english}
    \begin{minted}{csharp}
public static void ShiftRight(int[] arr, int n)
{
    int len = arr.Length;
    if (len == 0) return;
    int[] temp = new int[len];

    for (int i = 0; i < len; i++)
    {
        temp[(i + n) % len] = arr[i];
    }
    // نسخ القيم الجديدة
    for (int i = 0; i < len; i++)
    {
        arr[i] = temp[i];
    }
}
    \end{minted}
    \end{english}
    \end{boxSolution}
    \fi

    \item
    اكتب عملية خارجية \textenglish{void ReverseArray(int[] arr)} لقلب ترتيب عناصر المصفوفة (Reverse) \textbf{بدون} استخدام مصفوفة إضافية.
    \ifwithsols
    \begin{boxSolution}
    \begin{english}
    \begin{minted}{csharp}
public static void ReverseArray(int[] arr)
{
    int start = 0;
    int end = arr.Length - 1;
    while (start < end)
    {
        int temp = arr[start];
        arr[start] = arr[end];
        arr[end] = temp;
        start++;
        end--;
    }
}
    \end{minted}
    \end{english}
    \end{boxSolution}
    \fi

\end{enumerate}

\end{document}